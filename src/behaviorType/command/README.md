# 命令模式

## 目的

> 将请求封装成对象,从而允许你对不同请求,队列或日志请求的客户端参数化,
并支持可撤销操作.

![command](./command.png)

## 适用场景

* 当您想要通过一个操作来参数化对象时，使用Command模式。您可以在带有
回调函数的过程语言中表示这样的参数化，也就是说，在以后的某个点上注册的
一个函数。命令是一个面向对象的回调函数。

* 当您想要在不同的时间指定、队列和执行请求时，使用命令模式。一个命令
对象可以拥有一个独立于原始请求的生命周期。如果请求的接收者可以以独立
于地址空间的方式表示，那么您可以将一个命令对象传输到另一个进程，并实现该请求

* 当您想要支持撤销时，请使用命令模式。命令的执行操作可以存储状态，
以在命令本身中反转其效果。命令接口必须有一个附加的未执行操作，该操作
将逆转先前调用执行的效果。执行的命令存储在历史列表中。取消和重做是通
过遍历这个列表，分别调用unexecute和execute来实现的。

* 当您想要支持日志记录更改时，请使用命令模式，以便在系统崩溃时重新应
用它们。通过增加加载和存储操作的命令接口，您可以保存一个持久的变更日志。
从崩溃中恢复，包括从磁盘重新加载已记录的命令，并通过执行操作重新执行它们

* 当您想要在基本操作上构建一个围绕高级操作构建的系统时，使用命令模式。
这种结构在支持事务的信息系统中很常见。事务封装了对数据的一组更改。命令
模式提供了一种建模事务的方法。命令有一个公共接口，允许您用相同的方式调
用所有事务。该模式还可以很容易地通过新事务扩展系统